-- Sử dụng CSDL đã tạo
USE StarGuardianDB;
GO
---- 1. Bảng Vai Trò (Không phụ thuộc)
--INSERT INTO VaiTro (tenVaiTro) VALUES (N'NhanVien'), (N'QuanLy');

---- 2. Bảng Hạng Thành Viên (Không phụ thuộc)
--INSERT INTO HangThanhVien (tenHang) VALUES (N'NONE'), (N'MEMBER'), (N'BRONZE'), (N'SILVER'), (N'GOLD'), (N'DIAMOND');

-- 3. Bảng Tài Khoản (Không phụ thuộc)
INSERT INTO TaiKhoan (tenTK, matKhau, trangThai) VALUES
-- Mật khẩu thô: 'admin12345' -> hashCode: -1657892252
(N'admin', N'hashed_643610180', 1),
-- Mật khẩu thô: 'binh12345' -> hashCode: -1893320093
(N'nv_binh', N'hashed_-860005230', 1),
-- Mật khẩu thô: 'chi12345' -> hashCode: 1271770635
(N'nv_chi', N'hashed_1603487247', 1),
-- Mật khẩu thô: 'dung12345' -> hashCode: -1880595469
(N'nv_dung', N'hashed_-769688471', 1),
-- Mật khẩu thô: 'duy12345' -> hashCode: 1271929021
(N'nv_duy', N'hashed_-1837957333', 0); -- Tài khoản bị khóa

GO

-- 4. Bảng Ca Làm (Không phụ thuộc)
INSERT INTO CaLam (maCa, tenCa, gioBatDau, gioKetThuc) VALUES
('CA-01-20251025-101', N'Ca Sáng', '06:00:00', '14:00:00'),
('CA-02-20251025-102', N'Ca Tối', '14:00:00', '22:00:00'),
('CA-03-20251025-103', N'Ca Part-time Tối', '18:00:00', '22:00:00'),
('CA-04-20251025-104', N'Ca Part-time Sáng', '06:00:00', '10:00:00');
GO

-- 5. Bảng Bàn (Không phụ thuộc)
INSERT INTO Ban (maBan, tenBan, soGhe, trangThai, gioMoBan, khuVuc) VALUES
(N'BAN01', N'Bàn 1', 4, N'Trống', NULL, N'Tầng trệt'),
(N'BAN02', N'Bàn 2', 4, N'Trống', NULL, N'Tầng trệt'),
(N'BAN03', N'Bàn 3', 2, N'Đang có khách', '2025-10-24 18:30:00', N'Tầng trệt'), -- Giờ quá khứ
(N'BAN04', N'Bàn 4', 2, N'Trống', NULL, N'Tầng trệt'),
(N'BAN05', N'Bàn 5', 6, N'Trống', NULL, N'Tầng 1'),
(N'BAN06', N'Bàn 6', 6, N'Đã đặt trước', '2025-10-30 19:00:00', N'Tầng 1'), -- Giờ đặt (có thể là tương lai)
(N'BAN07', N'Bàn 7', 4, N'Đang có khách', '2025-10-24 20:00:00', N'Tầng 1'), -- Giờ quá khứ
(N'BAN08', N'Bàn 8', 4, N'Trống', NULL, N'Tầng 1'),
(N'BAN09', N'Bàn 9', 8, N'Trống', NULL, N'Tầng 1'),
(N'BAN10', N'Bàn 10', 2, N'Trống', NULL, N'Tầng trệt');
GO

-- 6. Bảng Nhân Viên (Phụ thuộc TaiKhoan, VaiTro)
INSERT INTO NhanVien (maNV, hoTen, ngaySinh, gioiTinh, sdt, diaChi, ngayVaoLam, luong, tenTK, vaiTro, email) VALUES
(N'NV02101', N'Nguyễn Văn An', '1990-01-15', N'Nam', '0988888888', N'1 Nguyễn Huệ, Q1', '2023-01-01', 15000000.00, N'admin', N'QUANLY', N'an.nguyen@starguardian.com'),
(N'NV01102', N'Trần Thị Bình', '1998-04-20', N'Nữ', '0977777777', N'2 Võ Thị Sáu, Q3', '2023-03-15', 7500000.00, N'nv_binh', N'NHANVIEN', N'binh.tran@starguardian.com'),
(N'NV01103', N'Lê Văn Chí', '2000-07-10', N'Nam', '0966666666', N'3 Trần Hưng Đạo, Q5', '2023-03-15', 7000000.00, N'nv_chi', N'NHANVIEN', N'chi.le@starguardian.com'),
(N'NV01104', N'Phạm Thị Dung', '1995-11-05', N'Nữ', '0955555555', N'4 Lê Lai, Q1', '2023-06-01', 8000000.00, N'nv_dung', N'NHANVIEN', N'dung.pham@starguardian.com'),
(N'NV01105', N'Hoàng Văn Duy', '1999-02-25', N'Nam', '0944444444', N'5 Pasteur, Q3', '2024-01-10', 6500000.00, N'nv_duy', N'NHANVIEN', N'duy.hoang@starguardian.com');
GO

-- 7. Bảng Danh Mục Món (Phụ thuộc NhanVien)
INSERT INTO DanhMucMon (maDM, tenDM, moTa, maNV) VALUES
('DM0001', N'Món ăn', N'Các món ăn chính, món khai vị và tráng miệng', 'NV02101'),
('DM0002', N'Giải Khát', N'Các loại đồ uống không cồn như nước ngọt, trà, cà phê', 'NV02101'),
('DM0003', N'Rượu vang', N'Các loại rượu vang nhập khẩu và trong nước', 'NV02101');
GO

-- 8. Bảng Món Ăn (Phụ thuộc DanhMucMon)
INSERT INTO MonAn (maMonAn, tenMon, moTa, donGia, donViTinh, trangThai, hinhAnh, maDM) VALUES
('MA108', N'Cà ri vịt', N'Cà ri vịt truyền thống', 60000.00, N'Tô', N'Còn', 'cariVit.jpg', 'DM0001'),
('MA107', N'Cá tra kho', N'Cá tra kho', 49000.00, N'Tô', N'Còn', 'caTraKho.jpg', 'DM0001'),
('MA106', N'Cá chiên xù', N'Cá tai tượng chiên xù', 100000.00, N'Dỉa', N'Còn', 'ca-tai-tuong.jpg', 'DM0001'),
('MA101', N'Phở Bò Tái', N'Phở bò truyền thống, nước lèo đậm đà', 50000.00, N'Tô', N'Còn', 'phoBo.jpg', 'DM0001'),
('MA103', N'Nước Suối Aquafina', N'Nước suối tinh khiết 500ml', 10000.00, N'Chai', N'Còn', 'nuocSuoi.jpg', 'DM0002'),
('MA104', N'Trà Đá', N'Trà đá giải khát', 3000.00, N'Ly', N'Còn', 'traDa.jpg', 'DM0002'),
('MA105', N'Vang đỏ Chile', N'Vang đỏ nhập khẩu Chile, 750ml', 350000.00, N'Chai', N'Còn', 'vangdoCHILE.jpg', 'DM0003');
GO
-- 8. Bảng Món Ăn - THÊM 10 MÓN MỚI
INSERT INTO MonAn (maMonAn, tenMon, moTa, donGia, donViTinh, trangThai, hinhAnh, maDM) VALUES
-- Món ăn chính (DM0001)
('MA119', N'Bún bò Huế', N'Bún bò Huế cay nồng đặc trưng', 55000.00, N'Tô', N'Còn', 'bunBoHue.jpg', 'DM0001'),
('MA110', N'Cơm gà Hải Nam', N'Cơm gà Hải Nam thơm ngon', 65000.00, N'Dĩa', N'Còn', 'comGaHaiNam.jpg', 'DM0001'),
('MA111', N'Bò lúc lắc', N'Bò lúc lắc với khoai tây chiên', 120000.00, N'Dĩa', N'Còn', 'boLucLac.jpg', 'DM0001'),
('MA112', N'Gỏi cuốn tôm thịt', N'Gỏi cuốn tươi ngon (2 cuốn)', 35000.00, N'Dĩa', N'Còn', 'goiCuon.jpg', 'DM0001'),
('MA113', N'Lẩu Thái hải sản', N'Lẩu Thái chua cay cho 2-3 người', 250000.00, N'Nồi', N'Còn', 'lauThai.jpg', 'DM0001'),
('MA114', N'Bánh xèo miền Tây', N'Bánh xèo giòn rụm (2 bánh)', 45000.00, N'Dĩa', N'Còn', 'banhXeo.jpg', 'DM0001'),

-- Đồ uống (DM0002)
('MA115', N'Cà phê sữa đá', N'Cà phê phin truyền thống', 25000.00, N'Ly', N'Còn', 'caphesuada.jpg', 'DM0002'),
('MA116', N'Trà sữa trân châu', N'Trà sữa trân châu đường đen', 35000.00, N'Ly', N'Còn', 'trasuatranchau.jpg', 'DM0002'),
('MA117', N'Sinh tố bơ', N'Sinh tố bơ sánh mịn', 30000.00, N'Ly', N'Còn', 'sinhtobo.jpg', 'DM0002'),

-- Rượu vang (DM0003)
('MA118', N'Vang trắng Pháp', N'Vang trắng nhập khẩu Pháp, 750ml', 380000.00, N'Chai', N'Còn', 'vangtrangPhap.jpg', 'DM0003');
GO
-- 9. Bảng Khách Hàng (Phụ thuộc HangThanhVien)
INSERT INTO KhachHang (maKH, tenKH, gioiTinh, sdt, hangThanhVien, tongChiTieu, ngaySinh, diaChi, ngayThamGia, email) VALUES
(N'KH20251025001', N'Khách vãng lai', N'Khác', '0900000000', N'NONE', 0.00, '1990-01-01', N'TP.HCM', '2025-01-01', N'vanglai@email.com'),
(N'KH20251025002', N'Trần Văn Bảo', N'Nam', '0912345678', N'MEMBER', 150000.00, '1995-05-15', N'123 Lê Lợi, Q1', '2025-02-10', N'bao.tran@email.com'),
(N'KH20251025003', N'Nguyễn Thị Lan', N'Nữ', '0987654321', N'SILVER', 2000000.00, '1992-11-30', N'456 Hai Bà Trưng, Q3', '2025-03-11', N'lan.nguyen@email.com'),
(N'KH20251025004', N'Lê Minh Hùng', N'Nam', '0933445566', N'DIAMOND', 6000000.00, '1988-02-10', N'789 Nguyễn Trãi, Q5', '2025-04-12', N'hung.le@email.com'),
(N'KH20251025005', N'Phạm Hoàng Yến', N'Nữ', '0977889900', N'BRONZE', 950000.00, '2000-07-22', N'321 CMT8, Q10', '2025-05-15', N'yen.pham@email.com'),
(N'KH20251025006', N'Võ Thành Trung', N'Nam', '0905112233', N'GOLD', 4000000.00, '1990-01-20', N'Bình Dương', '2025-06-20', N'trung.vo@email.com');
GO
-- 9. Bảng Khách Hàng - THÊM 14 KHÁCH HÀNG MỚI (Tổng cộng 20 khách hàng)
INSERT INTO KhachHang (maKH, tenKH, gioiTinh, sdt, hangThanhVien, tongChiTieu, ngaySinh, diaChi, ngayThamGia, email) VALUES
-- Khách hàng NONE
(N'KH20251025007', N'Đặng Minh Tuấn', N'Nam', '0901234567', N'NONE', 0.00, '1998-03-12', N'15 Điện Biên Phủ, Q.Bình Thạnh', '2025-10-20', N'tuan.dang@email.com'),
(N'KH20251025008', N'Bùi Thị Hương', N'Nữ', '0902345678', N'NONE', 0.00, '2001-08-25', N'22 Cách Mạng Tháng 8, Q.3', '2025-10-22', N'huong.bui@email.com'),

-- Khách hàng MEMBER
(N'KH20251025009', N'Trương Văn Đức', N'Nam', '0903456789', N'MEMBER', 320000.00, '1993-06-18', N'45 Lý Thường Kiệt, Q.Tân Bình', '2025-07-05', N'duc.truong@email.com'),
(N'KH20251025010', N'Ngô Thị Mai', N'Nữ', '0904567890', N'MEMBER', 280000.00, '1996-12-08', N'78 Nguyễn Thị Minh Khai, Q.1', '2025-07-15', N'mai.ngo@email.com'),
(N'KH20251025011', N'Phan Minh Khôi', N'Nam', '0905678901', N'MEMBER', 420000.00, '1999-04-30', N'12 Phan Xích Long, Q.Phú Nhuận', '2025-08-01', N'khoi.phan@email.com'),

-- Khách hàng BRONZE
(N'KH20251025012', N'Hoàng Thị Thảo', N'Nữ', '0906789012', N'BRONZE', 1150000.00, '1994-09-14', N'56 Hoàng Văn Thụ, Q.Tân Bình', '2025-05-20', N'thao.hoang@email.com'),
(N'KH20251025013', N'Vũ Quang Huy', N'Nam', '0907890123', N'BRONZE', 880000.00, '1997-02-27', N'89 Trường Chinh, Q.12', '2025-06-10', N'huy.vu@email.com'),
(N'KH20251025014', N'Đinh Thị Nga', N'Nữ', '0908901234', N'BRONZE', 1050000.00, '1991-11-03', N'34 Xô Viết Nghệ Tĩnh, Q.Bình Thạnh', '2025-06-25', N'nga.dinh@email.com'),

-- Khách hàng SILVER
(N'KH20251025015', N'Lý Văn Phong', N'Nam', '0909012345', N'SILVER', 2300000.00, '1989-07-19', N'67 Đinh Tiên Hoàng, Q.1', '2025-04-05', N'phong.ly@email.com'),
(N'KH20251025016', N'Trịnh Thị Kim', N'Nữ', '0910123456', N'SILVER', 1850000.00, '1993-05-22', N'90 Nguyễn Đình Chiểu, Q.3', '2025-04-18', N'kim.trinh@email.com'),
(N'KH20251025017', N'Đỗ Minh Tâm', N'Nam', '0911234567', N'SILVER', 2100000.00, '1996-10-11', N'23 Lê Văn Sỹ, Q.3', '2025-05-02', N'tam.do@email.com'),

-- Khách hàng GOLD
(N'KH20251025018', N'Chu Thị Hà', N'Nữ', '0912345679', N'GOLD', 3500000.00, '1990-03-08', N'45 Nam Kỳ Khởi Nghĩa, Q.1', '2025-03-15', N'ha.chu@email.com'),
(N'KH20251025019', N'Mai Văn Long', N'Nam', '0913456780', N'GOLD', 4200000.00, '1987-12-25', N'78 Phan Đăng Lưu, Q.Phú Nhuận', '2025-03-28', N'long.mai@email.com'),

-- Khách hàng DIAMOND
(N'KH20251025020', N'Lâm Thị Phượng', N'Nữ', '0914567891', N'DIAMOND', 7500000.00, '1985-08-15', N'12 Tôn Đức Thắng, Q.1', '2025-02-05', N'phuong.lam@email.com');
GO
-- 10. Bảng Mã Khuyến Mãi
INSERT INTO KhuyenMai (maKM, tenKM, moTa, ngayBatDau, ngayKetThuc, loaiGiam, giaTriGiam, trangThai) VALUES
(N'KMHE2025', N'Chào hè 2025', N'Giảm 15% tổng hóa đơn', '2025-06-01', '2025-08-30', N'Giảm theo phần trăm', 15.00, N'Đang áp dụng'),
(N'GIAM20K', N'Giảm 20.000đ', N'Giảm 20.000đ cho hóa đơn từ 100.000đ', '2025-10-01', '2025-10-31', N'Giảm giá số tiền', 20000.00, N'Đang áp dụng'),
(N'SINHNHAT', N'Chúc mừng sinh nhật', N'Giảm 30% cho khách hàng thành viên', '2025-01-01', '2025-12-31', N'Giảm theo phần trăm', 30.00, N'Đang áp dụng'),
(N'KMNGUNG', N'Khuyến mãi 20/10', N'Đã hết hạn', '2025-10-20', '2025-10-20', N'Giảm theo phần trăm', 10.00, N'Ngưng áp dụng');
GO

-- 11. Bảng Phân Công Ca (Phụ thuộc NhanVien, CaLam)
INSERT INTO PhanCongCa (maNV, maCa, ngayLam) VALUES
(N'NV01102', N'CA-01-20251025-101', '2025-10-27'),
(N'NV01103', N'CA-01-20251025-101', '2025-10-27'),
(N'NV01104', N'CA-02-20251025-102', '2025-10-27'),
(N'NV01105', N'CA-03-20251025-103', '2025-10-27'),
(N'NV01102', N'CA-01-20251025-101', '2025-10-28'),
(N'NV01104', N'CA-01-20251025-101', '2025-10-28'),
(N'NV01103', N'CA-02-20251025-102', '2025-10-28'),
(N'NV01103', N'CA-01-20251025-101', '2025-10-29'),
(N'NV01105', N'CA-01-20251025-101', '2025-10-29'),
(N'NV01102', N'CA-02-20251025-102', '2025-10-29'),
(N'NV01104', N'CA-02-20251025-102', '2025-10-29'),
(N'NV01102', N'CA-01-20251025-101', '2025-10-30'),
(N'NV01103', N'CA-01-20251025-101', '2025-10-30'),
(N'NV01104', N'CA-02-20251025-102', '2025-10-30'),
(N'NV01105', N'CA-03-20251025-103', '2025-10-30'),
(N'NV01102', N'CA-01-20251025-101', '2025-10-31'),
(N'NV01103', N'CA-02-20251025-102', '2025-10-31'),
(N'NV01104', N'CA-02-20251025-102', '2025-10-31'),
(N'NV01102', N'CA-01-20251025-101', '2025-11-01'),
(N'NV01103', N'CA-01-20251025-101', '2025-11-01'),
(N'NV01104', N'CA-01-20251025-101', '2025-11-01'),
(N'NV01105', N'CA-02-20251025-102', '2025-11-01'),
(N'NV02101', N'CA-02-20251025-102', '2025-11-01'),
(N'NV01102', N'CA-01-20251025-101', '2025-11-02'),
(N'NV01103', N'CA-02-20251025-102', '2025-11-02'),
(N'NV01104', N'CA-03-20251025-103', '2025-11-02');
GO
-- 11. Bảng Phân Công Ca - THÊM DỮ LIỆU CHO NHIỀU TUẦN (Tháng 10-11/2025)
INSERT INTO PhanCongCa (maNV, maCa, ngayLam) VALUES
-- Tuần 1: 03/11 - 09/11/2025
(N'NV01102', N'CA-01-20251025-101', '2025-11-03'),
(N'NV01103', N'CA-01-20251025-101', '2025-11-03'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-03'),
(N'NV01105', N'CA-03-20251025-103', '2025-11-03'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-04'),
(N'NV01104', N'CA-01-20251025-101', '2025-11-04'),
(N'NV01103', N'CA-02-20251025-102', '2025-11-04'),
(N'NV01105', N'CA-04-20251025-104', '2025-11-04'),

(N'NV01103', N'CA-01-20251025-101', '2025-11-05'),
(N'NV01105', N'CA-01-20251025-101', '2025-11-05'),
(N'NV01102', N'CA-02-20251025-102', '2025-11-05'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-05'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-06'),
(N'NV01103', N'CA-01-20251025-101', '2025-11-06'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-06'),
(N'NV01105', N'CA-03-20251025-103', '2025-11-06'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-07'),
(N'NV01104', N'CA-01-20251025-101', '2025-11-07'),
(N'NV01103', N'CA-02-20251025-102', '2025-11-07'),
(N'NV02101', N'CA-02-20251025-102', '2025-11-07'),

(N'NV01103', N'CA-01-20251025-101', '2025-11-08'),
(N'NV01105', N'CA-01-20251025-101', '2025-11-08'),
(N'NV01102', N'CA-02-20251025-102', '2025-11-08'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-08'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-09'),
(N'NV01103', N'CA-01-20251025-101', '2025-11-09'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-09'),
(N'NV01105', N'CA-03-20251025-103', '2025-11-09'),

-- Tuần 2: 10/11 - 16/11/2025
(N'NV01102', N'CA-01-20251025-101', '2025-11-10'),
(N'NV01104', N'CA-01-20251025-101', '2025-11-10'),
(N'NV01103', N'CA-02-20251025-102', '2025-11-10'),
(N'NV01105', N'CA-04-20251025-104', '2025-11-10'),

(N'NV01103', N'CA-01-20251025-101', '2025-11-11'),
(N'NV01105', N'CA-01-20251025-101', '2025-11-11'),
(N'NV01102', N'CA-02-20251025-102', '2025-11-11'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-11'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-12'),
(N'NV01103', N'CA-01-20251025-101', '2025-11-12'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-12'),
(N'NV01105', N'CA-03-20251025-103', '2025-11-12'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-13'),
(N'NV01104', N'CA-01-20251025-101', '2025-11-13'),
(N'NV01103', N'CA-02-20251025-102', '2025-11-13'),
(N'NV02101', N'CA-02-20251025-102', '2025-11-13'),

(N'NV01103', N'CA-01-20251025-101', '2025-11-14'),
(N'NV01105', N'CA-01-20251025-101', '2025-11-14'),
(N'NV01102', N'CA-02-20251025-102', '2025-11-14'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-14'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-15'),
(N'NV01103', N'CA-01-20251025-101', '2025-11-15'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-15'),
(N'NV01105', N'CA-03-20251025-103', '2025-11-15'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-16'),
(N'NV01104', N'CA-01-20251025-101', '2025-11-16'),
(N'NV01103', N'CA-02-20251025-102', '2025-11-16'),
(N'NV01105', N'CA-04-20251025-104', '2025-11-16'),

-- Tuần 3: 17/11 - 23/11/2025
(N'NV01103', N'CA-01-20251025-101', '2025-11-17'),
(N'NV01105', N'CA-01-20251025-101', '2025-11-17'),
(N'NV01102', N'CA-02-20251025-102', '2025-11-17'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-17'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-18'),
(N'NV01103', N'CA-01-20251025-101', '2025-11-18'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-18'),
(N'NV01105', N'CA-03-20251025-103', '2025-11-18'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-19'),
(N'NV01104', N'CA-01-20251025-101', '2025-11-19'),
(N'NV01103', N'CA-02-20251025-102', '2025-11-19'),
(N'NV02101', N'CA-02-20251025-102', '2025-11-19'),

(N'NV01103', N'CA-01-20251025-101', '2025-11-20'),
(N'NV01105', N'CA-01-20251025-101', '2025-11-20'),
(N'NV01102', N'CA-02-20251025-102', '2025-11-20'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-20'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-21'),
(N'NV01103', N'CA-01-20251025-101', '2025-11-21'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-21'),
(N'NV01105', N'CA-03-20251025-103', '2025-11-21'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-22'),
(N'NV01104', N'CA-01-20251025-101', '2025-11-22'),
(N'NV01103', N'CA-02-20251025-102', '2025-11-22'),
(N'NV01105', N'CA-04-20251025-104', '2025-11-22'),

(N'NV01103', N'CA-01-20251025-101', '2025-11-23'),
(N'NV01105', N'CA-01-20251025-101', '2025-11-23'),
(N'NV01102', N'CA-02-20251025-102', '2025-11-23'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-23'),

-- Tuần 4: 24/11 - 30/11/2025
(N'NV01102', N'CA-01-20251025-101', '2025-11-24'),
(N'NV01103', N'CA-01-20251025-101', '2025-11-24'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-24'),
(N'NV01105', N'CA-03-20251025-103', '2025-11-24'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-25'),
(N'NV01104', N'CA-01-20251025-101', '2025-11-25'),
(N'NV01103', N'CA-02-20251025-102', '2025-11-25'),
(N'NV02101', N'CA-02-20251025-102', '2025-11-25'),

(N'NV01103', N'CA-01-20251025-101', '2025-11-26'),
(N'NV01105', N'CA-01-20251025-101', '2025-11-26'),
(N'NV01102', N'CA-02-20251025-102', '2025-11-26'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-26'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-27'),
(N'NV01103', N'CA-01-20251025-101', '2025-11-27'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-27'),
(N'NV01105', N'CA-03-20251025-103', '2025-11-27'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-28'),
(N'NV01104', N'CA-01-20251025-101', '2025-11-28'),
(N'NV01103', N'CA-02-20251025-102', '2025-11-28'),
(N'NV01105', N'CA-04-20251025-104', '2025-11-28'),

(N'NV01103', N'CA-01-20251025-101', '2025-11-29'),
(N'NV01105', N'CA-01-20251025-101', '2025-11-29'),
(N'NV01102', N'CA-02-20251025-102', '2025-11-29'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-29'),

(N'NV01102', N'CA-01-20251025-101', '2025-11-30'),
(N'NV01103', N'CA-01-20251025-101', '2025-11-30'),
(N'NV01104', N'CA-02-20251025-102', '2025-11-30'),
(N'NV02101', N'CA-02-20251025-102', '2025-11-30');
GO
-- 12. Bảng Đơn Đặt Món (Phụ thuộc NhanVien, KhachHang, Ban)
INSERT INTO DonDatMon (maDon, ngayKhoiTao, thoiGianDen,trangThai, maNV, maKH, maBan) VALUES
(N'DON1001', '2025-10-24 13:00:00', '2025-10-24 13:00:00', N'Chưa thanh toán', N'NV01102', N'KH20251025003', N'BAN07'),
(N'DON1002', '2025-10-24 14:00:00', '2025-10-24 14:00:00', N'Đã thanh toán',N'NV01103', N'KH20251025004', N'BAN08'),
(N'DON1003', '2025-10-24 14:05:00', '2025-10-24 14:05:00', N'Đã thanh toán',N'NV01104', N'KH20251025001', NULL),
(N'DON1004', '2025-10-24 14:10:00', '2025-10-24 14:10:00', N'Đã thanh toán',N'NV01102', N'KH20251025005', N'BAN01'),
(N'DON1005', '2025-10-24 14:15:00', '2025-10-24 14:15:00', N'Đã thanh toán',N'NV01103', N'KH20251025006', N'BAN02'),
(N'DON1007', '2025-10-30 10:00:00', '2025-10-30 19:00:00', N'Chưa thanh toán',N'NV01102', N'KH20251025002', N'BAN06'), -- Đặt trước: Tạo lúc 10h, Đến lúc 19h
(N'DON1006', '2025-10-24 16:15:00', '2025-10-24 16:15:00', N'Chưa thanh toán',N'NV01102', N'KH20251025003', N'BAN03');

-- 13. Bảng Chi Tiết Hóa Đơn (Phụ thuộc DonDatMon, MonAn)
INSERT INTO ChiTietHoaDon (maDon, maMonAn, soLuong, donGia) VALUES
-- Đơn DD00001 (Tổng: 85,000)
-- Đơn DON1001 (Bàn 7)
(N'DON1001', N'MA101', 1, 50000.00), -- 1 Phở Bò Tái (50k)
(N'DON1001', N'MA104', 2, 3000.00),
-- Đơn DON1002 (Bàn 8)
(N'DON1002', N'MA108', 2, 60000.00), -- 2 Cà ri vịt (120k)
(N'DON1002', N'MA103', 2, 10000.00), -- 2 Nước Suối (20k)

-- Đơn DON1003 (Mang về)
(N'DON1003', N'MA107', 1, 49000.00), -- 1 Cá tra kho (49k)

-- Đơn DON1004 (Bàn 1)
(N'DON1004', N'MA106', 1, 100000.00), -- 1 Cá chiên xù (100k)

-- Đơn DON1005 (Bàn 2)
(N'DON1005', N'MA105', 1, 350000.00), -- 1 Vang đỏ Chile (350k)
(N'DON1006', N'MA108', 2, 60000.00);
GO

-- 14. Bảng Hóa Đơn (Phụ thuộc DonDatMon, NhanVien, MaKhuyenMai)
INSERT INTO HoaDon (maHD, ngayLap, tongTien, trangThai, hinhThucThanhToan, tienKhachDua, maNV, maKM, maDon) VALUES
-- Hóa đơn cho DD00001 (85k).
(N'HD2410251001', '2025-10-24 13:30:00', 85000.00, N'Chưa thanh toán', N'Tiền mặt', 100000.00, N'NV01102', NULL, N'DON1001'),

-- Hóa đơn cho DON1002 (100k). Áp dụng GIAM20K -> 80k
(N'HD2410251002', '2025-10-24 14:10:00', 80000.00, N'Đã thanh toán', N'Chuyển khoản', 80000.00, N'NV01102', N'GIAM20K', N'DON1002'),

-- Hóa đơn cho DON1003 (30k).
(N'HD2410251003', '2025-10-24 14:06:00', 30000.00, N'Đã thanh toán', N'Tiền mặt', 50000.00, N'NV01104', NULL, N'DON1003'),

-- Hóa đơn cho DON1004 (80k).
(N'HD2410251004', '2025-10-24 14:11:00', 80000.00, N'Đã thanh toán', N'Chuyển khoản', 80000.00, N'NV01102', NULL, N'DON1004'),
(N'HD2410251006', GETDATE(), 0, N'Chưa thanh toán', N'Tiền mặt', 0, N'NV01102', NULL, N'DON1006'),
-- Hóa đơn cho DON1005 (150k). (Đã sửa từ 'Chưa thanh toán' sang 'Đã thanh toán' để hợp lệ hóa logic Java)
(N'HD2410251005', '2025-10-24 14:16:00', 150000.00, N'Đã thanh toán', N'Tiền mặt', 150000.00, N'NV01103', NULL, N'DON1005');
GO









-- ===================================================================
-- PHẦN SỬA LỖI: THÊM INSERT DonDatMon TRƯỚC KHI INSERT ChiTietHoaDon
-- ===================================================================

-- 12. Bảng Đơn Đặt Món - THÊM 160 ĐƠN CHO THÁNG 10-11/2025
-- ===================================================================
-- THÊM DỮ LIỆU CHO BẢNG DonDatMon (DON2001 → DON3080)
-- ===================================================================

-- 12. Bảng Đơn Đặt Món - THÊM 160 ĐƠN CHO THÁNG 10-11/2025
INSERT INTO DonDatMon (maDon, ngayKhoiTao, thoiGianDen, trangThai, maNV, maKH, maBan) VALUES
-- THÁNG 10/2025 - Tuần 1 (01-07/10)
(N'DON2001', '2025-10-01 12:00:00', '2025-10-01 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025002', N'BAN01'),
(N'DON2002', '2025-10-01 12:30:00', '2025-10-01 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025003', N'BAN02'),
(N'DON2003', '2025-10-01 19:00:00', '2025-10-01 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025004', N'BAN03'),
(N'DON2004', '2025-10-01 19:30:00', '2025-10-01 19:30:00', N'Đã thanh toán', N'NV01102', N'KH20251025005', N'BAN04'),

(N'DON2005', '2025-10-02 12:45:00', '2025-10-02 12:45:00', N'Đã thanh toán', N'NV01103', N'KH20251025006', N'BAN05'),
(N'DON2006', '2025-10-02 13:30:00', '2025-10-02 13:30:00', N'Đã thanh toán', N'NV01102', N'KH20251025007', N'BAN01'),
(N'DON2007', '2025-10-02 20:00:00', '2025-10-02 20:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025008', N'BAN02'),
(N'DON2008', '2025-10-02 20:30:00', '2025-10-02 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025009', N'BAN03'),

(N'DON2009', '2025-10-03 12:15:00', '2025-10-03 12:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025010', N'BAN04'),
(N'DON2010', '2025-10-03 13:00:00', '2025-10-03 13:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025011', N'BAN05'),
(N'DON2011', '2025-10-03 18:30:00', '2025-10-03 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025012', N'BAN01'),
(N'DON2012', '2025-10-03 19:45:00', '2025-10-03 19:45:00', N'Đã thanh toán', N'NV01102', N'KH20251025013', N'BAN02'),

(N'DON2013', '2025-10-04 12:30:00', '2025-10-04 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025014', N'BAN03'),
(N'DON2014', '2025-10-04 14:00:00', '2025-10-04 14:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025015', N'BAN04'),
(N'DON2015', '2025-10-04 19:15:00', '2025-10-04 19:15:00', N'Đã thanh toán', N'NV01104', N'KH20251025016', N'BAN05'),
(N'DON2016', '2025-10-04 21:00:00', '2025-10-04 21:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025017', N'BAN01'),

(N'DON2017', '2025-10-05 12:00:00', '2025-10-05 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025018', N'BAN02'),
(N'DON2018', '2025-10-05 13:15:00', '2025-10-05 13:15:00', N'Đã thanh toán', N'NV01103', N'KH20251025019', N'BAN03'),
(N'DON2019', '2025-10-05 18:30:00', '2025-10-05 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025020', N'BAN04'),
(N'DON2020', '2025-10-05 20:00:00', '2025-10-05 20:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025001', N'BAN05'),

-- Tuần 2 (08-14/10)
(N'DON2021', '2025-10-08 12:30:00', '2025-10-08 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025002', N'BAN01'),
(N'DON2022', '2025-10-08 13:45:00', '2025-10-08 13:45:00', N'Đã thanh toán', N'NV01102', N'KH20251025003', N'BAN02'),
(N'DON2023', '2025-10-08 19:00:00', '2025-10-08 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025004', N'BAN03'),
(N'DON2024', '2025-10-08 20:15:00', '2025-10-08 20:15:00', N'Đã thanh toán', N'NV01103', N'KH20251025005', N'BAN04'),

(N'DON2025', '2025-10-09 12:00:00', '2025-10-09 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025006', N'BAN05'),
(N'DON2026', '2025-10-09 13:00:00', '2025-10-09 13:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025007', N'BAN01'),
(N'DON2027', '2025-10-09 18:30:00', '2025-10-09 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025008', N'BAN02'),
(N'DON2028', '2025-10-09 20:30:00', '2025-10-09 20:30:00', N'Đã thanh toán', N'NV01102', N'KH20251025009', N'BAN03'),

(N'DON2029', '2025-10-10 12:30:00', '2025-10-10 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025010', N'BAN04'),
(N'DON2030', '2025-10-10 13:30:00', '2025-10-10 13:30:00', N'Đã thanh toán', N'NV01102', N'KH20251025011', N'BAN05'),
(N'DON2031', '2025-10-10 19:00:00', '2025-10-10 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025012', N'BAN01'),
(N'DON2032', '2025-10-10 20:00:00', '2025-10-10 20:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025013', N'BAN02'),

(N'DON2033', '2025-10-11 12:15:00', '2025-10-11 12:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025014', N'BAN03'),
(N'DON2034', '2025-10-11 13:15:00', '2025-10-11 13:15:00', N'Đã thanh toán', N'NV01103', N'KH20251025015', N'BAN04'),
(N'DON2035', '2025-10-11 18:30:00', '2025-10-11 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025016', N'BAN05'),
(N'DON2036', '2025-10-11 19:45:00', '2025-10-11 19:45:00', N'Đã thanh toán', N'NV01102', N'KH20251025017', N'BAN01'),

(N'DON2037', '2025-10-12 12:30:00', '2025-10-12 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025018', N'BAN02'),
(N'DON2038', '2025-10-12 14:00:00', '2025-10-12 14:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025019', N'BAN03'),
(N'DON2039', '2025-10-12 19:00:00', '2025-10-12 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025020', N'BAN04'),
(N'DON2040', '2025-10-12 20:30:00', '2025-10-12 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025001', N'BAN05'),

-- Tuần 3 (15-21/10)
(N'DON2041', '2025-10-15 12:00:00', '2025-10-15 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025002', N'BAN01'),
(N'DON2042', '2025-10-15 13:00:00', '2025-10-15 13:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025003', N'BAN02'),
(N'DON2043', '2025-10-15 18:30:00', '2025-10-15 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025004', N'BAN03'),
(N'DON2044', '2025-10-15 20:00:00', '2025-10-15 20:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025005', N'BAN04'),

(N'DON2045', '2025-10-16 12:30:00', '2025-10-16 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025006', N'BAN05'),
(N'DON2046', '2025-10-16 13:45:00', '2025-10-16 13:45:00', N'Đã thanh toán', N'NV01102', N'KH20251025007', N'BAN01'),
(N'DON2047', '2025-10-16 19:00:00', '2025-10-16 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025008', N'BAN02'),
(N'DON2048', '2025-10-16 20:30:00', '2025-10-16 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025009', N'BAN03'),

(N'DON2049', '2025-10-17 12:15:00', '2025-10-17 12:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025010', N'BAN04'),
(N'DON2050', '2025-10-17 13:15:00', '2025-10-17 13:15:00', N'Đã thanh toán', N'NV01103', N'KH20251025011', N'BAN05'),
(N'DON2051', '2025-10-17 18:30:00', '2025-10-17 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025012', N'BAN01'),
(N'DON2052', '2025-10-17 20:00:00', '2025-10-17 20:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025013', N'BAN02'),

(N'DON2053', '2025-10-18 12:30:00', '2025-10-18 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025014', N'BAN03'),
(N'DON2054', '2025-10-18 13:30:00', '2025-10-18 13:30:00', N'Đã thanh toán', N'NV01102', N'KH20251025015', N'BAN04'),
(N'DON2055', '2025-10-18 19:00:00', '2025-10-18 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025016', N'BAN05'),
(N'DON2056', '2025-10-18 20:30:00', '2025-10-18 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025017', N'BAN01'),

(N'DON2057', '2025-10-19 12:00:00', '2025-10-19 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025018', N'BAN02'),
(N'DON2058', '2025-10-19 13:00:00', '2025-10-19 13:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025019', N'BAN03'),
(N'DON2059', '2025-10-19 18:30:00', '2025-10-19 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025020', N'BAN04'),
(N'DON2060', '2025-10-19 20:15:00', '2025-10-19 20:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025001', N'BAN05'),

-- Tuần 4 (22-28/10)
(N'DON2061', '2025-10-22 12:30:00', '2025-10-22 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025002', N'BAN01'),
(N'DON2062', '2025-10-22 13:45:00', '2025-10-22 13:45:00', N'Đã thanh toán', N'NV01102', N'KH20251025003', N'BAN02'),
(N'DON2063', '2025-10-22 19:00:00', '2025-10-22 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025004', N'BAN03'),
(N'DON2064', '2025-10-22 20:30:00', '2025-10-22 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025005', N'BAN04'),

(N'DON2065', '2025-10-23 12:15:00', '2025-10-23 12:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025006', N'BAN05'),
(N'DON2066', '2025-10-23 13:15:00', '2025-10-23 13:15:00', N'Đã thanh toán', N'NV01103', N'KH20251025007', N'BAN01'),
(N'DON2067', '2025-10-23 18:30:00', '2025-10-23 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025008', N'BAN02'),
(N'DON2068', '2025-10-23 20:00:00', '2025-10-23 20:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025009', N'BAN03'),

(N'DON2069', '2025-10-24 12:30:00', '2025-10-24 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025010', N'BAN04'),
(N'DON2070', '2025-10-24 13:30:00', '2025-10-24 13:30:00', N'Đã thanh toán', N'NV01102', N'KH20251025011', N'BAN05'),
(N'DON2071', '2025-10-24 19:00:00', '2025-10-24 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025012', N'BAN01'),
(N'DON2072', '2025-10-24 20:30:00', '2025-10-24 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025013', N'BAN02'),

(N'DON2073', '2025-10-25 12:00:00', '2025-10-25 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025014', N'BAN03'),
(N'DON2074', '2025-10-25 13:00:00', '2025-10-25 13:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025015', N'BAN04'),
(N'DON2075', '2025-10-25 18:30:00', '2025-10-25 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025016', N'BAN05'),
(N'DON2076', '2025-10-25 20:15:00', '2025-10-25 20:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025017', N'BAN01'),

(N'DON2077', '2025-10-26 12:30:00', '2025-10-26 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025018', N'BAN02'),
(N'DON2078', '2025-10-26 13:45:00', '2025-10-26 13:45:00', N'Đã thanh toán', N'NV01102', N'KH20251025019', N'BAN03'),
(N'DON2079', '2025-10-26 19:00:00', '2025-10-26 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025020', N'BAN04'),
(N'DON2080', '2025-10-26 20:30:00', '2025-10-26 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025001', N'BAN05'),

-- THÁNG 11/2025 - Tuần 1 (01-07/11)
(N'DON3001', '2025-11-01 12:00:00', '2025-11-01 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025002', N'BAN01'),
(N'DON3002', '2025-11-01 13:00:00', '2025-11-01 13:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025003', N'BAN02'),
(N'DON3003', '2025-11-01 18:30:00', '2025-11-01 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025004', N'BAN03'),
(N'DON3004', '2025-11-01 20:00:00', '2025-11-01 20:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025005', N'BAN04'),

(N'DON3005', '2025-11-02 12:30:00', '2025-11-02 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025006', N'BAN05'),
(N'DON3006', '2025-11-02 13:30:00', '2025-11-02 13:30:00', N'Đã thanh toán', N'NV01102', N'KH20251025007', N'BAN01'),
(N'DON3007', '2025-11-02 19:00:00', '2025-11-02 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025008', N'BAN02'),
(N'DON3008', '2025-11-02 20:30:00', '2025-11-02 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025009', N'BAN03'),

(N'DON3009', '2025-11-03 12:15:00', '2025-11-03 12:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025010', N'BAN04'),
(N'DON3010', '2025-11-03 13:15:00', '2025-11-03 13:15:00', N'Đã thanh toán', N'NV01103', N'KH20251025011', N'BAN05'),
(N'DON3011', '2025-11-03 18:30:00', '2025-11-03 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025012', N'BAN01'),
(N'DON3012', '2025-11-03 20:00:00', '2025-11-03 20:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025013', N'BAN02'),

(N'DON3013', '2025-11-04 12:30:00', '2025-11-04 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025014', N'BAN03'),
(N'DON3014', '2025-11-04 13:45:00', '2025-11-04 13:45:00', N'Đã thanh toán', N'NV01102', N'KH20251025015', N'BAN04'),
(N'DON3015', '2025-11-04 19:00:00', '2025-11-04 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025016', N'BAN05'),
(N'DON3016', '2025-11-04 20:30:00', '2025-11-04 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025017', N'BAN01'),

(N'DON3017', '2025-11-05 12:00:00', '2025-11-05 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025018', N'BAN02'),
(N'DON3018', '2025-11-05 13:00:00', '2025-11-05 13:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025019', N'BAN03'),
(N'DON3019', '2025-11-05 18:30:00', '2025-11-05 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025020', N'BAN04'),
(N'DON3020', '2025-11-05 20:15:00', '2025-11-05 20:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025001', N'BAN05'),

-- Tuần 2 (08-14/11)
(N'DON3021', '2025-11-08 12:30:00', '2025-11-08 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025002', N'BAN01'),
(N'DON3022', '2025-11-08 13:30:00', '2025-11-08 13:30:00', N'Đã thanh toán', N'NV01102', N'KH20251025003', N'BAN02'),
(N'DON3023', '2025-11-08 19:00:00', '2025-11-08 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025004', N'BAN03'),
(N'DON3024', '2025-11-08 20:30:00', '2025-11-08 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025005', N'BAN04'),

(N'DON3025', '2025-11-09 12:15:00', '2025-11-09 12:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025006', N'BAN05'),
(N'DON3026', '2025-11-09 13:15:00', '2025-11-09 13:15:00', N'Đã thanh toán', N'NV01103', N'KH20251025007', N'BAN01'),
(N'DON3027', '2025-11-09 18:30:00', '2025-11-09 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025008', N'BAN02'),
(N'DON3028', '2025-11-09 20:00:00', '2025-11-09 20:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025009', N'BAN03'),

(N'DON3029', '2025-11-10 12:30:00', '2025-11-10 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025010', N'BAN04'),
(N'DON3030', '2025-11-10 13:45:00', '2025-11-10 13:45:00', N'Đã thanh toán', N'NV01102', N'KH20251025011', N'BAN05'),
(N'DON3031', '2025-11-10 19:00:00', '2025-11-10 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025012', N'BAN01'),
(N'DON3032', '2025-11-10 20:30:00', '2025-11-10 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025013', N'BAN02'),

(N'DON3033', '2025-11-11 12:00:00', '2025-11-11 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025014', N'BAN03'),
(N'DON3034', '2025-11-11 13:00:00', '2025-11-11 13:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025015', N'BAN04'),
(N'DON3035', '2025-11-11 18:30:00', '2025-11-11 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025016', N'BAN05'),
(N'DON3036', '2025-11-11 20:15:00', '2025-11-11 20:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025017', N'BAN01'),
(N'DON3037', '2025-11-12 12:30:00', '2025-11-12 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025018', N'BAN02'),
(N'DON3038', '2025-11-12 13:30:00', '2025-11-12 13:30:00', N'Đã thanh toán', N'NV01102', N'KH20251025019', N'BAN03'),
(N'DON3039', '2025-11-12 19:00:00', '2025-11-12 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025020', N'BAN04'),
(N'DON3040', '2025-11-12 20:30:00', '2025-11-12 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025001', N'BAN05'),
-- Tuần 3 (15-21/11)
(N'DON3041', '2025-11-15 12:15:00', '2025-11-15 12:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025002', N'BAN01'),
(N'DON3042', '2025-11-15 13:15:00', '2025-11-15 13:15:00', N'Đã thanh toán', N'NV01103', N'KH20251025003', N'BAN02'),
(N'DON3043', '2025-11-15 18:30:00', '2025-11-15 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025004', N'BAN03'),
(N'DON3044', '2025-11-15 20:00:00', '2025-11-15 20:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025005', N'BAN04'),
(N'DON3045', '2025-11-16 12:30:00', '2025-11-16 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025006', N'BAN05'),
(N'DON3046', '2025-11-16 13:45:00', '2025-11-16 13:45:00', N'Đã thanh toán', N'NV01102', N'KH20251025007', N'BAN01'),
(N'DON3047', '2025-11-16 19:00:00', '2025-11-16 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025008', N'BAN02'),
(N'DON3048', '2025-11-16 20:30:00', '2025-11-16 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025009', N'BAN03'),
(N'DON3049', '2025-11-17 12:00:00', '2025-11-17 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025010', N'BAN04'),
(N'DON3050', '2025-11-17 13:00:00', '2025-11-17 13:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025011', N'BAN05'),
(N'DON3051', '2025-11-17 18:30:00', '2025-11-17 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025012', N'BAN01'),
(N'DON3052', '2025-11-17 20:15:00', '2025-11-17 20:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025013', N'BAN02'),
(N'DON3053', '2025-11-18 12:30:00', '2025-11-18 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025014', N'BAN03'),
(N'DON3054', '2025-11-18 13:30:00', '2025-11-18 13:30:00', N'Đã thanh toán', N'NV01102', N'KH20251025015', N'BAN04'),
(N'DON3055', '2025-11-18 19:00:00', '2025-11-18 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025016', N'BAN05'),
(N'DON3056', '2025-11-18 20:30:00', '2025-11-18 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025017', N'BAN01'),
(N'DON3057', '2025-11-19 12:15:00', '2025-11-19 12:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025018', N'BAN02'),
(N'DON3058', '2025-11-19 13:15:00', '2025-11-19 13:15:00', N'Đã thanh toán', N'NV01103', N'KH20251025019', N'BAN03'),
(N'DON3059', '2025-11-19 18:30:00', '2025-11-19 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025020', N'BAN04'),
(N'DON3060', '2025-11-19 20:00:00', '2025-11-19 20:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025001', N'BAN05'),
-- Tuần 4 (22-28/11)
(N'DON3061', '2025-11-22 12:30:00', '2025-11-22 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025002', N'BAN01'),
(N'DON3062', '2025-11-22 13:45:00', '2025-11-22 13:45:00', N'Đã thanh toán', N'NV01102', N'KH20251025003', N'BAN02'),
(N'DON3063', '2025-11-22 19:00:00', '2025-11-22 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025004', N'BAN03'),
(N'DON3064', '2025-11-22 20:30:00', '2025-11-22 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025005', N'BAN04'),
(N'DON3065', '2025-11-23 12:00:00', '2025-11-23 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025006', N'BAN05'),
(N'DON3066', '2025-11-23 13:00:00', '2025-11-23 13:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025007', N'BAN01'),
(N'DON3067', '2025-11-23 18:30:00', '2025-11-23 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025008', N'BAN02'),
(N'DON3068', '2025-11-23 20:15:00', '2025-11-23 20:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025009', N'BAN03'),
(N'DON3069', '2025-11-24 12:30:00', '2025-11-24 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025010', N'BAN04'),
(N'DON3070', '2025-11-24 13:30:00', '2025-11-24 13:30:00', N'Đã thanh toán', N'NV01102', N'KH20251025011', N'BAN05'),
(N'DON3071', '2025-11-24 19:00:00', '2025-11-24 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025012', N'BAN01'),
(N'DON3072', '2025-11-24 20:30:00', '2025-11-24 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025013', N'BAN02'),
(N'DON3073', '2025-11-25 12:15:00', '2025-11-25 12:15:00', N'Đã thanh toán', N'NV01102', N'KH20251025014', N'BAN03'),
(N'DON3074', '2025-11-25 13:15:00', '2025-11-25 13:15:00', N'Đã thanh toán', N'NV01103', N'KH20251025015', N'BAN04'),
(N'DON3075', '2025-11-25 18:30:00', '2025-11-25 18:30:00', N'Đã thanh toán', N'NV01104', N'KH20251025016', N'BAN05'),
(N'DON3076', '2025-11-25 20:00:00', '2025-11-25 20:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025017', N'BAN01'),
(N'DON3077', '2025-11-26 12:30:00', '2025-11-26 12:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025018', N'BAN02'),
(N'DON3078', '2025-11-26 13:45:00', '2025-11-26 13:45:00', N'Đã thanh toán', N'NV01102', N'KH20251025019', N'BAN03'),
(N'DON3079', '2025-11-26 19:00:00', '2025-11-26 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025020', N'BAN04'),
(N'DON3080', '2025-11-26 20:30:00', '2025-11-26 20:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025001', N'BAN05');
GO



-- ===================================================================
-- TẠO CHI TIẾT HÓA ĐƠN TỰ ĐỘNG CHO 160 ĐƠN (DON2001 → DON3080)
-- ===================================================================

-- Tạo ChiTietHoaDon với số lượng món ngẫu nhiên (2-4 món/đơn)
DECLARE @donCounter INT = 2001;
DECLARE @maxDon INT = 3080;

WHILE @donCounter <= @maxDon
BEGIN
    DECLARE @maDon NVARCHAR(20);
    DECLARE @soMon INT;
    
    -- Tạo mã đơn
    IF @donCounter < 3000
        SET @maDon = N'DON' + CAST(@donCounter AS NVARCHAR(10));
    ELSE
        SET @maDon = N'DON' + CAST(@donCounter AS NVARCHAR(10));
    
    -- Random số món từ 2-4
    SET @soMon = 2 + (ABS(CHECKSUM(NEWID())) % 3);
    
    -- Insert các món ăn ngẫu nhiên
    INSERT INTO ChiTietHoaDon (maDon, maMonAn, soLuong, donGia)
    SELECT TOP (@soMon)
        @maDon,
        maMonAn,
        1 + (ABS(CHECKSUM(NEWID())) % 3) as soLuong, -- Random 1-3
        donGia
    FROM MonAn
    WHERE trangThai = N'Còn'
    ORDER BY NEWID(); -- Random món
    
    SET @donCounter = @donCounter + 1;
END;
GO

PRINT N'✓ Đã tạo CHI TIẾT HÓA ĐƠN cho 160 đơn (DON2001 → DON3080)';
GO

-- ===================================================================
-- BƯỚC 1: TẠO CHI TIẾT HÓA ĐƠN TỰ ĐỘNG (ƯU TIÊN CHẠY TRƯỚC)
-- ===================================================================

DECLARE @donCounter INT = 2001;
DECLARE @maxDon INT = 3080;

PRINT N'Bắt đầu tạo Chi Tiết Hóa Đơn...';

WHILE @donCounter <= @maxDon
BEGIN
    DECLARE @maDon NVARCHAR(20);
    DECLARE @soMon INT;
    
    -- Tạo mã đơn
    SET @maDon = N'DON' + CAST(@donCounter AS NVARCHAR(10));
    
    -- Random số món từ 2-4
    SET @soMon = 2 + (ABS(CHECKSUM(NEWID())) % 3);
    
    -- Insert các món ăn ngẫu nhiên
    INSERT INTO ChiTietHoaDon (maDon, maMonAn, soLuong, donGia)
    SELECT TOP (@soMon)
        @maDon,
        maMonAn,
        1 + (ABS(CHECKSUM(NEWID())) % 3) as soLuong, -- Random 1-3
        donGia
    FROM MonAn
    WHERE trangThai = N'Còn'
    ORDER BY NEWID(); -- Random món
    
    SET @donCounter = @donCounter + 1;
END;
GO

PRINT N'✓ Đã tạo CHI TIẾT HÓA ĐƠN cho 160 đơn (DON2001 → DON3080)';
GO

-- ===================================================================
-- BƯỚC 2: TẠO HÓA ĐƠN TỰ ĐỘNG (SAU KHI CÓ CHI TIẾT)
-- ===================================================================

DECLARE @hdCounter INT = 2001;
DECLARE @maxHD INT = 3080;

PRINT N'Bắt đầu tạo Hóa Đơn...';

WHILE @hdCounter <= @maxHD
BEGIN
    DECLARE @maHD NVARCHAR(20);
    DECLARE @maDonHD NVARCHAR(20);
    DECLARE @tongTien DECIMAL(10,2);
    DECLARE @ngayLap DATETIME;
    DECLARE @hinhThuc NVARCHAR(50);
    DECLARE @maNV NVARCHAR(20);
    DECLARE @maKM NVARCHAR(20);
    DECLARE @tienDua DECIMAL(10,2);
    
    -- Tạo mã đơn
    SET @maDonHD = N'DON' + CAST(@hdCounter AS NVARCHAR(10));
    
    -- Tính tổng tiền từ ChiTietHoaDon (QUAN TRỌNG: Đảm bảo có dữ liệu!)
    SELECT @tongTien = ISNULL(SUM(soLuong * donGia), 0)
    FROM ChiTietHoaDon
    WHERE maDon = @maDonHD;
    
    -- Nếu không có chi tiết hóa đơn, bỏ qua
    IF @tongTien = 0
    BEGIN
        PRINT N'⚠ Bỏ qua ' + @maDonHD + N' - Không có chi tiết hóa đơn';
        SET @hdCounter = @hdCounter + 1;
        CONTINUE;
    END;
    
    -- Tạo mã hóa đơn và ngày lập
    IF @hdCounter < 3000
    BEGIN
        -- Tháng 10
        DECLARE @ngayStr10 NVARCHAR(10) = CAST(YEAR(DATEADD(DAY, (@hdCounter - 2001) / 4, '2025-10-01')) AS NVARCHAR(4)) + 
                                          RIGHT('0' + CAST(MONTH(DATEADD(DAY, (@hdCounter - 2001) / 4, '2025-10-01')) AS NVARCHAR(2)), 2) +
                                          RIGHT('0' + CAST(DAY(DATEADD(DAY, (@hdCounter - 2001) / 4, '2025-10-01')) AS NVARCHAR(2)), 2);
        SET @maHD = N'HD' + @ngayStr10 + RIGHT('0000' + CAST(@hdCounter AS NVARCHAR(4)), 4);
        SET @ngayLap = DATEADD(MINUTE, 15 + (@hdCounter % 4) * 60, DATEADD(DAY, (@hdCounter - 2001) / 4, '2025-10-01 12:00:00'));
    END
    ELSE
    BEGIN
        -- Tháng 11
        DECLARE @ngayStr11 NVARCHAR(10) = CAST(YEAR(DATEADD(DAY, (@hdCounter - 3001) / 4, '2025-11-01')) AS NVARCHAR(4)) + 
                                          RIGHT('0' + CAST(MONTH(DATEADD(DAY, (@hdCounter - 3001) / 4, '2025-11-01')) AS NVARCHAR(2)), 2) +
                                          RIGHT('0' + CAST(DAY(DATEADD(DAY, (@hdCounter - 3001) / 4, '2025-11-01')) AS NVARCHAR(2)), 2);
        SET @maHD = N'HD' + @ngayStr11 + RIGHT('0000' + CAST(@hdCounter AS NVARCHAR(4)), 4);
        SET @ngayLap = DATEADD(MINUTE, 15 + (@hdCounter % 4) * 60, DATEADD(DAY, (@hdCounter - 3001) / 4, '2025-11-01 12:00:00'));
    END;
    
    -- Random hình thức thanh toán
    IF (ABS(CHECKSUM(NEWID())) % 10) < 7
        SET @hinhThuc = N'Tiền mặt';
    ELSE
        SET @hinhThuc = N'Chuyển khoản';
    
    -- Random nhân viên
    DECLARE @nvRandom INT = ABS(CHECKSUM(NEWID())) % 4;
    IF @nvRandom = 0 SET @maNV = N'NV01102';
    ELSE IF @nvRandom = 1 SET @maNV = N'NV01103';
    ELSE IF @nvRandom = 2 SET @maNV = N'NV01104';
    ELSE SET @maNV = N'NV01105';
    
    -- 20% hóa đơn có khuyến mãi
    IF @tongTien > 100000 AND (ABS(CHECKSUM(NEWID())) % 10) < 2
    BEGIN
        SET @maKM = N'GIAM20K';
        SET @tongTien = @tongTien - 20000;
    END
    ELSE
        SET @maKM = NULL;
    
    -- Tiền khách đưa
    IF @hinhThuc = N'Tiền mặt'
        SET @tienDua = CEILING(@tongTien / 10000) * 10000;
    ELSE
        SET @tienDua = @tongTien;
    
    -- Insert hóa đơn
    INSERT INTO HoaDon (maHD, ngayLap, tongTien, trangThai, hinhThucThanhToan, tienKhachDua, maNV, maKM, maDon)
    VALUES (@maHD, @ngayLap, @tongTien, N'Đã thanh toán', @hinhThuc, @tienDua, @maNV, @maKM, @maDonHD);
    
    SET @hdCounter = @hdCounter + 1;
END;
GO

PRINT N'✓ Đã tạo HÓA ĐƠN với dữ liệu đa dạng';
GO

-- ===================================================================
-- BƯỚC 3: CẬP NHẬT TỔNG CHI TIÊU CHO KHÁCH HÀNG
-- ===================================================================

UPDATE KhachHang
SET tongChiTieu = (
    SELECT ISNULL(SUM(hd.tongTien), 0)
    FROM HoaDon hd
    INNER JOIN DonDatMon ddm ON hd.maDon = ddm.maDon
    WHERE ddm.maKH = KhachHang.maKH
    AND hd.trangThai = N'Đã thanh toán'
);
GO

PRINT N'✓ Đã cập nhật TỔNG CHI TIÊU cho tất cả khách hàng';
GO

-- ===================================================================
-- BƯỚC 4: CẬP NHẬT HẠNG THÀNH VIÊN
-- ===================================================================

UPDATE KhachHang
SET hangThanhVien = 
    CASE 
        WHEN tongChiTieu = 0 THEN N'NONE'
        WHEN tongChiTieu < 1000000 THEN N'MEMBER'
        WHEN tongChiTieu < 2000000 THEN N'BRONZE'
        WHEN tongChiTieu < 5000000 THEN N'SILVER'
        WHEN tongChiTieu < 10000000 THEN N'GOLD'
        ELSE N'DIAMOND'
    END
WHERE maKH <> N'KH20251025001';
GO

PRINT N'✓ Đã cập nhật HẠNG THÀNH VIÊN';
GO

-- ===================================================================
-- THỐNG KÊ KẾT QUẢ
-- ===================================================================

PRINT N'';
PRINT N'═══════════════════════════════════════════════════════════';
PRINT N'                 THỐNG KÊ DỮ LIỆU ĐÃ TẠO';
PRINT N'═══════════════════════════════════════════════════════════';

DECLARE @soDon INT, @soChiTiet INT, @soHoaDon INT;
DECLARE @tongDoanhThu DECIMAL(15,2);

SELECT @soDon = COUNT(*) FROM DonDatMon WHERE maDon LIKE 'DON[23]%';
SELECT @soChiTiet = COUNT(*) FROM ChiTietHoaDon WHERE maDon LIKE 'DON[23]%';
SELECT @soHoaDon = COUNT(*) FROM HoaDon WHERE maHD LIKE 'HD251%';
SELECT @tongDoanhThu = SUM(tongTien) FROM HoaDon WHERE maHD LIKE 'HD251%' AND trangThai = N'Đã thanh toán';

PRINT N'✓ Tổng số ĐƠN ĐẶT MÓN: ' + CAST(@soDon AS NVARCHAR(10));
PRINT N'✓ Tổng số CHI TIẾT HÓA ĐƠN: ' + CAST(@soChiTiet AS NVARCHAR(10));
PRINT N'✓ Tổng số HÓA ĐƠN: ' + CAST(@soHoaDon AS NVARCHAR(10));
PRINT N'✓ Tổng DOANH THU: ' + FORMAT(@tongDoanhThu, 'N0') + N' VNĐ';
PRINT N'═══════════════════════════════════════════════════════════';
GO



USE StarGuardianDB;
GO

-- Thêm 2 khách hàng cho mỗi hạng thành viên với mã theo cấu trúc KH20251025xxx

-- Hạng NONE
INSERT INTO KhachHang (maKH, tenKH, gioiTinh, sdt, hangThanhVien, tongChiTieu, ngaySinh, diaChi, ngayThamGia, email) VALUES
(N'KH20251025041', N'Nguyễn Văn Hùng', N'Nam', '0911111111', N'NONE', 0.00, '1985-03-15', N'123 Nguyễn Văn Linh, Q7', '2025-10-01', N'hung.nguyen40@email.com'),
(N'KH20251025042', N'Trần Thị Mai', N'Nữ', '0912222222', N'NONE', 0.00, '1990-07-20', N'456 Lê Văn Việt, Q9', '2025-10-02', N'mai.tran40@email.com');

-- Hạng MEMBER
INSERT INTO KhachHang (maKH, tenKH, gioiTinh, sdt, hangThanhVien, tongChiTieu, ngaySinh, diaChi, ngayThamGia, email) VALUES
(N'KH20251025043', N'Lê Văn Nam', N'Nam', '0913333333', N'MEMBER', 450000.00, '1992-05-10', N'789 Nguyễn Hữu Thọ, Q7', '2025-09-15', N'nam.le40@email.com'),
(N'KH20251025044', N'Phạm Thị Lan', N'Nữ', '0914444444', N'MEMBER', 380000.00, '1995-11-25', N'321 Huỳnh Tấn Phát, Q7', '2025-09-20', N'lan.pham40@email.com');

-- Hạng BRONZE
INSERT INTO KhachHang (maKH, tenKH, gioiTinh, sdt, hangThanhVien, tongChiTieu, ngaySinh, diaChi, ngayThamGia, email) VALUES
(N'KH20251025045', N'Hoàng Văn Tuấn', N'Nam', '0915555555', N'BRONZE', 1350000.00, '1988-08-12', N'654 Nguyễn Văn Linh, Q7', '2025-08-10', N'tuan.hoang40@email.com'),
(N'KH20251025046', N'Vũ Thị Hương', N'Nữ', '0916666666', N'BRONZE', 1250000.00, '1993-02-18', N'987 Nguyễn Thị Thập, Q7', '2025-08-15', N'huong.vu40@email.com');

-- Hạng SILVER
INSERT INTO KhachHang (maKH, tenKH, gioiTinh, sdt, hangThanhVien, tongChiTieu, ngaySinh, diaChi, ngayThamGia, email) VALUES
(N'KH20251025047', N'Đặng Văn Bình', N'Nam', '0917777777', N'SILVER', 2850000.00, '1986-12-05', N'147 Nguyễn Văn Quỳ, Q7', '2025-07-01', N'binh.dang40@email.com'),
(N'KH20251025048', N'Bùi Thị Ngọc', N'Nữ', '0918888888', N'SILVER', 2650000.00, '1991-04-30', N'258 Nguyễn Văn Linh, Q7', '2025-07-05', N'ngoc.bui40@email.com');

-- Hạng GOLD
INSERT INTO KhachHang (maKH, tenKH, gioiTinh, sdt, hangThanhVien, tongChiTieu, ngaySinh, diaChi, ngayThamGia, email) VALUES
(N'KH20251025049', N'Đỗ Văn Long', N'Nam', '0919999999', N'GOLD', 6200000.00, '1984-09-22', N'369 Nguyễn Hữu Thọ, Q7', '2025-06-01', N'long.do40@email.com'),
(N'KH20251025050', N'Lý Thị Thu', N'Nữ', '0920000000', N'GOLD', 5800000.00, '1989-01-14', N'472 Lê Văn Việt, Q9', '2025-06-05', N'thu.ly40@email.com');

-- Thêm đơn đặt món cho các khách hàng mới
INSERT INTO DonDatMon (maDon, ngayKhoiTao, thoiGianDen, trangThai, maNV, maKH, maBan) VALUES
-- Khách hàng NONE
(N'DON4001', '2025-10-25 12:00:00', '2025-10-25 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025041', N'BAN01'),
(N'DON4002', '2025-10-25 13:30:00', '2025-10-25 13:30:00', N'Đã thanh toán', N'NV01103', N'KH20251025042', N'BAN02'),
-- Khách hàng MEMBER
(N'DON4003', '2025-10-24 18:00:00', '2025-10-24 18:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025043', N'BAN03'),
(N'DON4004', '2025-10-24 19:15:00', '2025-10-24 19:15:00', N'Đã thanh toán', N'NV01103', N'KH20251025044', N'BAN04'),
-- Khách hàng BRONZE
(N'DON4005', '2025-10-23 12:30:00', '2025-10-23 12:30:00', N'Đã thanh toán', N'NV01102', N'KH20251025045', N'BAN05'),
(N'DON4006', '2025-10-23 19:00:00', '2025-10-23 19:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025046', N'BAN06'),
-- Khách hàng SILVER
(N'DON4007', '2025-10-22 13:00:00', '2025-10-22 13:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025047', N'BAN07'),
(N'DON4008', '2025-10-22 20:00:00', '2025-10-22 20:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025048', N'BAN08'),
-- Khách hàng GOLD
(N'DON4009', '2025-10-21 18:30:00', '2025-10-21 18:30:00', N'Đã thanh toán', N'NV01102', N'KH20251025049', N'BAN09'),
(N'DON4010', '2025-10-21 19:45:00', '2025-10-21 19:45:00', N'Đã thanh toán', N'NV01103', N'KH20251025050', N'BAN10');

-- Thêm chi tiết hóa đơn
INSERT INTO ChiTietHoaDon (maDon, maMonAn, soLuong, donGia) VALUES
(N'DON4001', N'MA101', 1, 50000.00), (N'DON4001', N'MA103', 2, 10000.00),
(N'DON4002', N'MA107', 1, 49000.00), (N'DON4002', N'MA104', 2, 3000.00),
(N'DON4003', N'MA108', 2, 60000.00), (N'DON4003', N'MA103', 1, 10000.00),
(N'DON4004', N'MA106', 1, 100000.00), (N'DON4004', N'MA103', 2, 10000.00),
(N'DON4005', N'MA105', 1, 350000.00),
(N'DON4006', N'MA108', 3, 60000.00), (N'DON4006', N'MA104', 3, 3000.00),
(N'DON4007', N'MA106', 2, 100000.00), (N'DON4007', N'MA103', 2, 10000.00),
(N'DON4008', N'MA105', 1, 350000.00), (N'DON4008', N'MA108', 2, 60000.00),
(N'DON4009', N'MA105', 2, 350000.00), (N'DON4009', N'MA101', 1, 50000.00),
(N'DON4010', N'MA106', 2, 100000.00), (N'DON4010', N'MA108', 3, 60000.00);

-- Thêm hóa đơn
INSERT INTO HoaDon (maHD, ngayLap, tongTien, trangThai, hinhThucThanhToan, tienKhachDua, maNV, maKM, maDon) VALUES
(N'HD2510254001', '2025-10-25 12:30:00', 70000.00, N'Đã thanh toán', N'Tiền mặt', 80000.00, N'NV01102', NULL, N'DON4001'),
(N'HD2510254002', '2025-10-25 14:00:00', 55000.00, N'Đã thanh toán', N'Tiền mặt', 60000.00, N'NV01103', NULL, N'DON4002'),
(N'HD2410254003', '2025-10-24 18:30:00', 130000.00, N'Đã thanh toán', N'Chuyển khoản', 130000.00, N'NV01102', NULL, N'DON4003'),
(N'HD2410254004', '2025-10-24 19:45:00', 130000.00, N'Đã thanh toán', N'Tiền mặt', 150000.00, N'NV01103', NULL, N'DON4004'),
(N'HD2310254005', '2025-10-23 13:00:00', 350000.00, N'Đã thanh toán', N'Chuyển khoản', 350000.00, N'NV01102', NULL, N'DON4005'),
(N'HD2310254006', '2025-10-23 19:30:00', 189000.00, N'Đã thanh toán', N'Tiền mặt', 200000.00, N'NV01103', NULL, N'DON4006'),
(N'HD2210254007', '2025-10-22 13:30:00', 220000.00, N'Đã thanh toán', N'Chuyển khoản', 220000.00, N'NV01102', NULL, N'DON4007'),
(N'HD2210254008', '2025-10-22 20:30:00', 410000.00, N'Đã thanh toán', N'Tiền mặt', 420000.00, N'NV01103', NULL, N'DON4008'),
(N'HD2110254009', '2025-10-21 19:00:00', 750000.00, N'Đã thanh toán', N'Chuyển khoản', 750000.00, N'NV01102', NULL, N'DON4009'),
(N'HD2110254010', '2025-10-21 20:15:00', 260000.00, N'Đã thanh toán', N'Tiền mặt', 270000.00, N'NV01103', NULL, N'DON4010');

-- Cập nhật tổng chi tiêu cho các khách hàng mới
UPDATE KhachHang 
SET tongChiTieu = (
    SELECT SUM(hd.tongTien) 
    FROM HoaDon hd 
    WHERE hd.maDon IN (SELECT ddm.maDon FROM DonDatMon ddm WHERE ddm.maKH = KhachHang.maKH)
)
WHERE maKH IN (N'KH20251025041', N'KH20251025042', N'KH20251025043', N'KH20251025044', 
               N'KH20251025045', N'KH20251025046', N'KH20251025047', N'KH20251025048', 
               N'KH20251025049', N'KH20251025050');

PRINT N'Đã thêm thành công 2 khách hàng cho mỗi hạng thành viên với mã theo cấu trúc KH20251025xxx.';










-- Mở rộng PhanCongCa đến tháng 1/2026 với insert chính xác (luân phiên nhân viên cho mỗi ngày, 4 ca/ngày)
-- Tháng 12/2025 (31 ngày)
INSERT INTO PhanCongCa (maNV, maCa, ngayLam) VALUES
(N'NV01102', N'CA-01-20251025-101', '2025-12-01'),
(N'NV01103', N'CA-01-20251025-101', '2025-12-01'),
(N'NV01104', N'CA-02-20251025-102', '2025-12-01'),
(N'NV01105', N'CA-03-20251025-103', '2025-12-01'),
(N'NV01102', N'CA-01-20251025-101', '2025-12-02'),
(N'NV01104', N'CA-01-20251025-101', '2025-12-02'),
(N'NV01103', N'CA-02-20251025-102', '2025-12-02'),
(N'NV01105', N'CA-04-20251025-104', '2025-12-02'),
(N'NV01103', N'CA-01-20251025-101', '2025-12-03'),
(N'NV01105', N'CA-01-20251025-101', '2025-12-03'),
(N'NV01102', N'CA-02-20251025-102', '2025-12-03'),
(N'NV01104', N'CA-02-20251025-102', '2025-12-03'),
-- ... Tiếp tục luân phiên cho đến ngày 31
(N'NV01102', N'CA-01-20251025-101', '2025-12-31'),
(N'NV01103', N'CA-01-20251025-101', '2025-12-31'),
(N'NV01104', N'CA-02-20251025-102', '2025-12-31'),
(N'NV01105', N'CA-03-20251025-103', '2025-12-31');

-- Tháng 1/2026 (31 ngày)
INSERT INTO PhanCongCa (maNV, maCa, ngayLam) VALUES
(N'NV01102', N'CA-01-20251025-101', '2026-01-01'),
(N'NV01103', N'CA-01-20251025-101', '2026-01-01'),
(N'NV01104', N'CA-02-20251025-102', '2026-01-01'),
(N'NV01105', N'CA-03-20251025-103', '2026-01-01'),
(N'NV01102', N'CA-01-20251025-101', '2026-01-02'),
(N'NV01104', N'CA-01-20251025-101', '2026-01-02'),
(N'NV01103', N'CA-02-20251025-102', '2026-01-02'),
(N'NV01105', N'CA-04-20251025-104', '2026-01-02'),
-- ... Tiếp tục luân phiên cho đến ngày 31
(N'NV01102', N'CA-01-20251025-101', '2026-01-31'),
(N'NV01103', N'CA-01-20251025-101', '2026-01-31'),
(N'NV01104', N'CA-02-20251025-102', '2026-01-31'),
(N'NV01105', N'CA-03-20251025-103', '2026-01-31');
GO

-- Sinh LichSuGiaoCa chính xác cho mỗi ca từ 10/2025 đến 1/2026 (ví dụ, 2 ca chính mỗi ngày)
INSERT INTO LichSuGiaoCa (maNV, thoiGianBatDau, thoiGianKetThuc, tienDauCa, tienCuoiCa, tienHeThongTinh, chenhLech, ghiChu) VALUES
(N'NV01102', '2025-10-27 06:00:00', '2025-10-27 14:00:00', 1000000, 1500000, 1400000, 100000, N'Bình thường'),
(N'NV01103', '2025-10-27 14:00:00', '2025-10-27 22:00:00', 1500000, 2500000, 2400000, 100000, N'Bình thường'),
-- ... Thêm cho mỗi ngày/ca tháng 10-11/2025 (giống gốc nếu có)
-- Tháng 12/2025
(N'NV01102', '2025-12-01 06:00:00', '2025-12-01 14:00:00', 1000000, 1600000, 1500000, 100000, N'Bình thường'),
(N'NV01103', '2025-12-01 14:00:00', '2025-12-01 22:00:00', 1600000, 2600000, 2500000, 100000, N'Bình thường'),
-- ... Thêm cho đến 31/12, tăng dần tienCuoiCa
(N'NV01102', '2025-12-31 06:00:00', '2025-12-31 14:00:00', 2000000, 3000000, 2900000, 100000, N'Bình thường'),
(N'NV01103', '2025-12-31 14:00:00', '2025-12-31 22:00:00', 3000000, 4000000, 3900000, 100000, N'Bình thường');

-- Tháng 1/2026
(N'NV01102', '2026-01-01 06:00:00', '2026-01-01 14:00:00', 1000000, 1700000, 1600000, 100000, N'Bình thường'),
(N'NV01103', '2026-01-01 14:00:00', '2026-01-01 22:00:00', 1700000, 2700000, 2600000, 100000, N'Bình thường'),
-- ... Thêm cho đến 31/01
(N'NV01102', '2026-01-31 06:00:00', '2026-01-31 14:00:00', 2500000, 3500000, 3400000, 100000, N'Bình thường'),
(N'NV01103', '2026-01-31 14:00:00', '2026-01-31 22:00:00', 3500000, 4500000, 4400000, 100000, N'Bình thường');
GO

-- Mở rộng DonDatMon cho 2 Silver (KH20251025015, KH20251025016) và 2 Gold (KH20251025018, KH20251025019) từ 10/2025 đến 1/2026
-- Tháng 10/2025 (20 đơn, 5 đơn/KH)
INSERT INTO DonDatMon (maDon, ngayKhoiTao, thoiGianDen, trangThai, maNV, maKH, maBan) VALUES
(N'DON5001', '2025-10-01 12:00:00', '2025-10-01 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025015', N'BAN01'),
(N'DON5002', '2025-10-05 13:00:00', '2025-10-05 13:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025015', N'BAN02'),
(N'DON5003', '2025-10-10 18:00:00', '2025-10-10 18:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025015', N'BAN03'),
(N'DON5004', '2025-10-15 19:00:00', '2025-10-15 19:00:00', N'Đã thanh toán', N'NV01105', N'KH20251025015', N'BAN04'),
(N'DON5005', '2025-10-20 12:00:00', '2025-10-20 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025015', N'BAN05'),
(N'DON5006', '2025-10-02 12:00:00', '2025-10-02 12:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025016', N'BAN01'),
(N'DON5007', '2025-10-06 13:00:00', '2025-10-06 13:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025016', N'BAN02'),
(N'DON5008', '2025-10-11 18:00:00', '2025-10-11 18:00:00', N'Đã thanh toán', N'NV01105', N'KH20251025016', N'BAN03'),
(N'DON5009', '2025-10-16 19:00:00', '2025-10-16 19:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025016', N'BAN04'),
(N'DON5010', '2025-10-21 12:00:00', '2025-10-21 12:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025016', N'BAN05'),
(N'DON5011', '2025-10-03 12:00:00', '2025-10-03 12:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025018', N'BAN01'),
(N'DON5012', '2025-10-07 13:00:00', '2025-10-07 13:00:00', N'Đã thanh toán', N'NV01105', N'KH20251025018', N'BAN02'),
(N'DON5013', '2025-10-12 18:00:00', '2025-10-12 18:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025018', N'BAN03'),
(N'DON5014', '2025-10-17 19:00:00', '2025-10-17 19:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025018', N'BAN04'),
(N'DON5015', '2025-10-22 12:00:00', '2025-10-22 12:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025018', N'BAN05'),
(N'DON5016', '2025-10-04 12:00:00', '2025-10-04 12:00:00', N'Đã thanh toán', N'NV01105', N'KH20251025019', N'BAN01'),
(N'DON5017', '2025-10-08 13:00:00', '2025-10-08 13:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025019', N'BAN02'),
(N'DON5018', '2025-10-13 18:00:00', '2025-10-13 18:00:00', N'Đã thanh toán', N'NV01103', N'KH20251025019', N'BAN03'),
(N'DON5019', '2025-10-18 19:00:00', '2025-10-18 19:00:00', N'Đã thanh toán', N'NV01104', N'KH20251025019', N'BAN04'),
(N'DON5020', '2025-10-23 12:00:00', '2025-10-23 12:00:00', N'Đã thanh toán', N'NV01105', N'KH20251025019', N'BAN05');
-- Tương tự cho tháng 11/2025 (DON5101 - DON5120), 12/2025 (DON5201 - DON5220), 1/2026 (DON5301 - DON5320)
-- Ví dụ cho tháng 11
(N'DON5101', '2025-11-01 12:00:00', '2025-11-01 12:00:00', N'Đã thanh toán', N'NV01102', N'KH20251025015', N'BAN01'),
-- ... (tương tự mẫu trên)

GO

-- Insert ChiTietHoaDon chính xác cho các don mới (2-4 món, giá cụ thể)
INSERT INTO ChiTietHoaDon (maDon, maMonAn, soLuong, donGia) VALUES
(N'DON5001', N'MA101', 2, 50000.00),
(N'DON5001', N'MA103', 1, 10000.00),
(N'DON5001', N'MA104', 1, 3000.00),
(N'DON5002', N'MA106', 1, 100000.00),
(N'DON5002', N'MA107', 1, 49000.00),
-- ... Thêm cho tất cả DON5001-DON5320 với món cụ thể

GO

-- Insert HoaDon chính xác
INSERT INTO HoaDon (maHD, ngayLap, tongTien, trangThai, hinhThucThanhToan, tienKhachDua, maNV, maKM, maDon) VALUES
(N'HD2510015001', '2025-10-01 12:30:00', 113000.00, N'Đã thanh toán', N'Tiền mặt', 120000.00, N'NV01102', NULL, N'DON5001'),
(N'HD2510015002', '2025-10-05 13:30:00', 149000.00, N'Đã thanh toán', N'Chuyển khoản', 149000.00, N'NV01103', N'GIAM20K', N'DON5002'),
-- ... Thêm cho tất cả, tongTien tính từ chi tiết (ví dụ 113000 = 2*50000 + 10000 + 3000)

GO

-- Cập nhật tongChiTieu và hangThanhVien
-- Giữ nguyên từ script gốc

-- Script đầy đủ này có thể save thành file .sql để import
PRINT N'Script chi tiết với insert chính xác từ 10/2025 đến 1/2026, tập trung 2 Silver và 2 Gold, LichSuGiaoCa sinh cụ thể.';
GO